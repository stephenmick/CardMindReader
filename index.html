<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Mind Reader</title>
</head>
<style>
    body {
        font-family: Arial, Helvetica, sans-serif;
        background-image: linear-gradient(rgb(130, 255, 255), white);
        background-repeat: no-repeat;
    }

    button {
        margin: 1px;
        border-radius: 4px;
    }

    header {      
        display: flex;
        justify-content: center;
    }

    /* default for mobile view */
    form {
        display: flex;
        flex-direction: column;
        margin-left: 5%;
        width: 90%;
    }
    
    /* for tablet */
    @media only screen and (min-width: 600px) {
        form {
            width: 70%;
            margin-left: 15%;
        }
    }


    /* for desktop */
    @media only screen and (min-width: 768px) {
        form {
            width: 50%;
            margin-left: 25%;
        }
    }
    

    .input {
        display: grid;
        grid-template-columns: 1fr 1fr 4fr 4fr 1fr;
        grid-template-rows: auto;
        grid-template-areas: ". info left right .";
        align-items: center;
        border-radius: 20px;
        padding: 5px;
        border: 5px;
        margin: 5px;
    }

    #inputZero {
        background-color: rgb(150, 190, 255);    }

    #inputOne {
        background-color: rgb(160, 195, 255);
    }

    #inputTwo {
        background-color: rgb(170, 205, 255);
    }

    #inputThree {
        background-color: rgb(180, 210, 255);
    }

    .row {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  width: 100%;
}

.column {
  display: flex;
  flex-direction: column;
  flex-basis: 100%;
  flex: 1;
}

.info {
    grid-area: info;
}

    .cardInput {
        display: inline-flex;
        justify-self: center;
        grid-area: left;
        flex-wrap: wrap;
    }

    .suitInput{
        display: inline-flex;
        justify-self: center;
        grid-area: right;
    }

    .btn {
        display: flex;
        justify-content: center;
    }

    .answer {
        display: flex;
        justify-content: center;
    }

    .red {
        color: red;
    }

    .submit-button {
        background-color:rgb(130, 255, 255)
    }
    
    .selected {
        background-color: lime;
    }

</style>

<body>
    <header>
        <h1>Card Mind Reader</h1>
    </header>
    <div id="cardForm">
        <div class="input" id="inputZero">
            <div class="info">1st Card:&nbsp;</div>
            <div class="cardInput">
                <button id="0-2" onClick="select(event, 0, 2)">2</button>
                <button id="0-3" onClick="select(event, 0, 3)">3</button>
                <button id="0-4" onClick="select(event, 0, 4)">4</button>
                <button id="0-5" onClick="select(event, 0, 5)">5</button>
                <button id="0-6" onClick="select(event, 0, 6)">6</button>
                <button id="0-7" onClick="select(event, 0, 7)">7</button>
                <button id="0-8" onClick="select(event, 0, 8)">8</button>
                <button id="0-9" onClick="select(event, 0, 9)">9</button>
                <button id="0-10" onClick="select(event, 0, 10)">10</button>
                <button id="0-11" onClick="select(event, 0, 11)">J</button>
                <button id="0-12" onClick="select(event, 0, 12)">Q</button>
                <button id="0-13" onClick="select(event, 0, 13)">K</button>
                <button id="0-14" onClick="select(event, 0, 14)">A</button>
            </div>
            <div class="suitInput">
                <span>Suit:&nbsp;</span>
                <button id="0-20" onClick="selectSuit(event, 0, 20)">&clubs;</button>
                <button id="0-21" class="red" onClick="selectSuit(event, 0, 21)" >&diams;</button>
                <button id="0-22" class="red" onClick="selectSuit(event, 0, 22)">&hearts;</button>
                <button id="0-23" onClick="selectSuit(event, 0, 23)">&spades;</button>
            </div>
        </div>

        <div class="input" id="inputOne">
            <div class="info">2nd Card:&nbsp;</div>
            <div class="cardInput">
                <button id="1-2" onClick="select(event, 1, 2)">2</button>
                <button id="1-3" onClick="select(event, 1, 3)">3</button>
                <button id="1-4" onClick="select(event, 1, 4)">4</button>
                <button id="1-5" onClick="select(event, 1, 5)">5</button>
                <button id="1-6" onClick="select(event, 1, 6)">6</button>
                <button id="1-7" onClick="select(event, 1, 7)">7</button>
                <button id="1-8" onClick="select(event, 1, 8)">8</button>
                <button id="1-9" onClick="select(event, 1, 9)">9</button>
                <button id="1-10" onClick="select(event, 1, 10)">10</button>
                <button id="1-11" onClick="select(event, 1, 11)">J</button>
                <button id="1-12" onClick="select(event, 1, 12)">Q</button>
                <button id="1-13" onClick="select(event, 1, 13)">K</button>
                <button id="1-14" onClick="select(event, 1, 14)">A</button>
            </div>
            <div class="suitInput">
                <span>Suit:&nbsp;</span>
                <button id="1-20" onClick="selectSuit(event, 1, 20)">&clubs;</button>
                <button id="1-21" class="red" onClick="selectSuit(event, 1, 21)" >&diams;</button>
                <button id="1-22" class="red" onClick="selectSuit(event, 1, 22)">&hearts;</button>
                <button id="1-23" onClick="selectSuit(event, 1, 23)">&spades;</button>
            </div>
        </div>    

        <div class="input" id="inputTwo">
            <div class="info">3rd Card:&nbsp;</div>
            <div class="cardInput">
                <button id="2-2" onClick="select(event, 2, 2)">2</button>
                <button id="2-3" onClick="select(event, 2, 3)">3</button>
                <button id="2-4" onClick="select(event, 2, 4)">4</button>
                <button id="2-5" onClick="select(event, 2, 5)">5</button>
                <button id="2-6" onClick="select(event, 2, 6)">6</button>
                <button id="2-7" onClick="select(event, 2, 7)">7</button>
                <button id="2-8" onClick="select(event, 2, 8)">8</button>
                <button id="2-9" onClick="select(event, 2, 9)">9</button>
                <button id="2-10" onClick="select(event, 2, 10)">10</button>
                <button id="2-11" onClick="select(event, 2, 11)">J</button>
                <button id="2-12" onClick="select(event, 2, 12)">Q</button>
                <button id="2-13" onClick="select(event, 2, 13)">K</button>
                <button id="2-14" onClick="select(event, 2, 14)">A</button>
            </div>
            <div class="suitInput">
                <span>Suit:&nbsp;</span>
                <button id="2-20" onClick="selectSuit(event, 2, 20)">&clubs;</button>
                <button id="2-21" class="red" onClick="selectSuit(event, 2, 21)" >&diams;</button>
                <button id="2-22" class="red" onClick="selectSuit(event, 2, 22)">&hearts;</button>
                <button id="2-23" onClick="selectSuit(event, 2, 23)">&spades;</button>
            </div>
        </div>    

        <div class="input" id="inputThree">
            <div class="info">4th Card:&nbsp;</div>
            <div class="cardInput">
                <button id="3-2" onClick="select(event, 3, 2)">2</button>
                <button id="3-3" onClick="select(event, 3, 3)">3</button>
                <button id="3-4" onClick="select(event, 3, 4)">4</button>
                <button id="3-5" onClick="select(event, 3, 5)">5</button>
                <button id="3-6" onClick="select(event, 3, 6)">6</button>
                <button id="3-7" onClick="select(event, 3, 7)">7</button>
                <button id="3-8" onClick="select(event, 3, 8)">8</button>
                <button id="3-9" onClick="select(event, 3, 9)">9</button>
                <button id="3-10" onClick="select(event, 3, 10)">10</button>
                <button id="3-11" onClick="select(event, 3, 11)">J</button>
                <button id="3-12" onClick="select(event, 3, 12)">Q</button>
                <button id="3-13" onClick="select(event, 3, 13)">K</button>
                <button id="3-14" onClick="select(event, 3, 14)">A</button>
            </div>
            <div class="suitInput">
                <span>Suit:&nbsp;</span>
                <button id="3-20" onClick="selectSuit(event, 3, 20)">&clubs;</button>
                <button id="3-21" class="red" onClick="selectSuit(event, 3, 21)" >&diams;</button>
                <button id="3-22" class="red" onClick="selectSuit(event, 3, 22)">&hearts;</button>
                <button id="3-23" onClick="selectSuit(event, 3, 23)">&spades;</button>
            </div>
        </div>    

        <br>
        <div class="btn">
            <input class="submit-button" type="submit" value="Read My Mind" onClick="getFifthCard()">
        </div>
    </div>
    <br>
    <div class="answer">
        <h3 id="IntroText"></h3>
    </div>
    <div class="answer">
        <h2 id="FifthCard"></h2>
    </div>
</body>

<script>
    window.addEventListener('DOMContentLoaded', (event) => {
    document.getElementById('cardForm').addEventListener('submit', (event) => {
        event.preventDefault();
        })
    });

    function select(event, selectionNumber, cardValue){
        event.stopPropagation();
        // clear prior selection
        clearSelection(selectionNumber, 2, 14);
        // add current selection
        highlightSelection(selectionNumber, cardValue);
    }

    function selectSuit(event, selectionNumber, suit){
        event.stopPropagation();
        // clear prior selection
        clearSelection(selectionNumber, 20, 23);
        // add current selection
        highlightSelection(selectionNumber, suit);
    }


    // helper function to wipe the CSS from the card selection
    function clearSelection(selection, begin, end){
        for (i = begin; i <= end; i++) {
            let element = selection + "-" + i.toString();
            console.log(element);
            document.getElementById(element).classList.remove("selected");
        }
    }

    function highlightSelection(numberSelect, valueSelect){
        const selectString = numberSelect + "-" + valueSelect;
        const element = document.getElementById(selectString);
        element.classList.add("selected");
    }

    function getFifthCard() {
        let firstCardNumber = cardNumber(document.getElementById("fiCardNumber").value);
        const firstCardSuit = document.getElementById("fiCardSuit").value;
        const secondCardNumber = document.getElementById("seCardNumber").value;
        const secondCardSuit = document.getElementById("seCardSuit").value;
        const thirdCardNumber = document.getElementById("thCardNumber").value;
        const thirdCardSuit = document.getElementById("thCardSuit").value;
        const fourthCardNumber = document.getElementById("foCardNumber").value;
        const fourthCardSuit = document.getElementById("foCardSuit").value;
        // the calculated fifth card suit is the same as the first card
        let fifthCardSuit = firstCardSuit;
        const second = cardValue(secondCardNumber, secondCardSuit);
        const third = cardValue(thirdCardNumber, thirdCardSuit);
        const fourth = cardValue(fourthCardNumber, fourthCardSuit);
        /* the distance the fifth card is away from the first card is between 1 and 6
        and based on the order of the second, third, and fourth cards*/
        let cardDistance = getDistance(second, third, fourth);
        let fifthCard = "";
        let fifthCardNumber = firstCardNumber + cardDistance;
        switch (fifthCardNumber) {
            case 2:
                fifthCard = "2";
                break;
            case 3:
                fifthCard = "3";
                break;
            case 4:
                fifthCard = "4";
                break;
            case 5:
                fifthCard = "5";
                break;
            case 6:
                fifthCard = "6";
                break;
            case 7:
                fifthCard = "7";
                break;
            case 8:
                fifthCard = "8";
                break;
            case 9:
                fifthCard = "9";
                break;
            case 10:
                fifthCard = "10";
                break;
            case 11:
                fifthCard = "J";
                break;
            case 12:
                fifthCard = "Q";
                break;
            case 13:
                fifthCard = "K";
                break;
            case 14:
                fifthCard = "A";
                break;
            case 15:
                fifthCard = "2";
                break;
            case 16:
                fifthCard = "3";
                break;
            case 17:
                fifthCard = "4";
                break;
            case 18:
                fifthCard = "5";
                break;
            case 19:
                fifthCard = "6";
                break;
            case 20:
                fifthCard = "7";
                break;
        }
        fifthCard += ' of ';
        fifthCard += fifthCardSuit;
        fifthCard += 's';
        document.getElementById("IntroText").innerHTML = "Reading your mind, the next card is the...";
        document.getElementById("FifthCard").innerHTML = fifthCard;
    }

    // returns 1, 2, 3, 4, 5, or 6 based on the order of the given cards
    function getDistance(alpha, beta, gamma) {
        // cases when alpha is smallest
        if (alpha < beta && alpha < gamma) {
            if (beta < gamma) {
                return 1;
            }
            else return 2;
        }
        // cases when alpha is biggest
        if (alpha > beta && alpha > gamma) {
            if (beta < gamma) {
                return 5;
            }
            else return 6;
        }
        // other two cases when alpha is the middle size
        if (beta < gamma) {
            return 3;
        }
        // otherwise it's the final case
        return 4;
    }

    function cardNumber(number) {
        if (number === "J") {
            return 11;
        }
        else
            if (number === "Q") {
                return 12;
            }
            else
                if (number === "K") {
                    return 13;
                }
                else
                    if (number === "A") {
                        return 14;
                    }
        // if not a face card return the actual card number
        return parseInt(number);
    }

    function cardValue(number, suit) {
        let card = 0;
        if (number === "J") {
            card = 110;
        }
        else
            if (number === "Q") {
                card = 120;
            }
            else
                if (number === "K") {
                    card = 130;
                }
                else
                    if (number === "A") {
                        card = 140;
                    }
                    // otherwise set card value to ten times the card number
                    else {
                        card = 10 * parseInt(number);
                    }
        if (suit === "club") {
            card += 1;
        }
        else
            if (suit === "diamond") {
                card += 2;
            }
            else
                if (suit === "heart") {
                    card += 3;
                }
                else {
                    card += 4;
                }
        return card;
    }
</script>
</html>